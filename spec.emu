<!doctype html>
<meta charset="utf8">
<link rel="stylesheet" href="./spec.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="./spec.js"></script>
<pre class="metadata">
title: Pattern Matching
stage: 1
contributors: Daniel Rosenwasser, Jack Works, Jordan Harband, Mark Cohen, Ross Kirsling, Tab Atkins, Yulia Startsev
</pre>

<emu-clause id="sec-syntax">
  <h1>Syntax</h1>
  <emu-note>Work in progress.</emu-note>
  <h2>Syntax to deconstructing</h2>
  <emu-note>
    <a href="https://github.com/tc39/proposal-pattern-matching/#destructuring-enhancements">Back port new features from the pattern matching to deconstructing.</a>
    <pre><code class="javascript">const ${Some} with [a, b] = result;
const { a: ${ Some } with [a, b] } = result;</code></pre>
  </emu-note>
  <emu-grammar>
    BindingRestElement:
      <del>`...` BindingIdentifier</del>
      <ins>`...` BindingIdentifier?</ins>

    BindingElement:
      <ins>BindingInterpolation</ins>

    <ins>
      BindingInterpolation:
        `${` Expression `}` `with` BindingIdentifier
        `${` Expression `}` `with` BindingPattern
    </ins>
  </emu-grammar>

  <h2>Syntax of pattern matching</h2>
  <emu-grammar type="definition">
    MatchExpression ::
      `match` [no LineTerminator here] `(` Expression `)` [no LineTerminator here] `{` MatchClauses? `}`

    MatchClauses :
      MatchClause
      MatchClauses MatchClause

    MatchClause :
      `when` `(` MatchPattern `)` `if` `(` Expression `)` `:` Expression
      `when` `(` MatchPattern `)` `:` Expression
      `if` `(` Expression `)` `:` Expression
      `default` `:` Expression

    MatchPattern :
      CombinedMatchPattern
      InterpolationPattern
      IdentifierMatchPattern
      NearLiteralMatchPattern
      ObjectMatchPattern
      ArrayMatchPattern
      `(` MatchPattern `)`

    CombinedMatchPattern:
      MatchPattern `or` MatchPattern
      MatchPattern `and` MatchPattern

    InterpolationPattern:
      `${` Expression `}` `with` MatchPattern
      `${` Expression `}`

    IdentifierMatchPattern :
      BindingIdentifier

    NearLiteralMatchPattern :
      NullLiteral
      BooleanLiteral
      NumericLiteral
      StringLiteral
      RegularExpressionLiteral `with` MatchPattern
      RegularExpressionLiteral
      TemplateLiteral[~Tagged]
      `+` NumericLiteral
      `-` NumericLiteral
      `+` `Infinity`
      `-` `Infinity`

    ObjectMatchPattern :
      `{` `}`
      `{` MatchRestProperty `}`
      `{` MatchPropertyList `}`
      `{` MatchPropertyList `,` MatchRestProperty? `}`

    ArrayMatchPattern :
      `[` Elision? MatchRestElement? `]`
      `[` MatchElementList `]`
      `[` MatchElementList `,` Elision? MatchRestElement? `]`

    MatchRestProperty :
      `...` IdentifierMatchPattern

    MatchPropertyList :
      MatchProperty
      MatchPropertyList `,` MatchProperty

    MatchElementList :
      MatchElisionElement
      MatchElementList `,` MatchElisionElement

    MatchElisionElement :
      Elision? MatchPattern

    MatchProperty :
      IdentifierMatchPattern
      PropertyName `:` MatchPattern

    MatchRestElement :
      `...` MatchPattern?

  </emu-grammar>
  <emu-note>
    `undefined`, `NaN` and `Infinity` are covered by the IdentifierMatchPattern, but `+Infinity` and `-Infinity` are coverd by the NearLiteralMatchPattern.
  </emu-note>
  <emu-note>
    No Initializer is allowed in the current syntax. See <a href="https://github.com/tc39/proposal-pattern-matching/#default-values">https://github.com/tc39/proposal-pattern-matching/#default-values</a>
  </emu-note>
</emu-clause>
<emu-clause id="sec-match-expression">
  <h1>Match Expression</h1>
  <p>To be done</p>
</emu-clause>
